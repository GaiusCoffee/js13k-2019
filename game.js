class ac{}window.ac=new ac;
class s1{go(){window.ui}}window.s1=new s1;
class en{}window.en=new en;
class hk{go(){window.ui}}window.hk=new hk;
class nv{constructor(){this.i=[]}l(){return 0==this.i.length?"You have nothing in your pockets":`You have the following item(s): ${this.i.join(", ")}`}a(i){this.c(i)<0&&this.i.push(i)}r(i){this.i=this.i.filter(t=>t!=i)}c(i){return this.i.indexOf(i)}}window.nv=new nv;
class rb{go(){let o=window.ui;o.b.innerHTML="",window.pcount=0,window.direction=0,o.log("..."),o.tick(()=>{o.log("You wake up"),o.tick(()=>{o.log("You don't remember.. anything.."),o.tick(()=>{o.log("You feel this urge.. <strong>you have to go back..</strong>"),o.tick(this.a.bind(this))})})})}a(){let o=window.ui;o.log("You stand up from the cold stone floor. You are on a square platform, with a staircase in front of you going up, and another to your right going down."),o.tick(()=>{o.log("To your back and to your left are stone walls, one of which has a torch. Both above and below, you can barely see that there are similar platforms with torches."),o.tick(()=>{o.log("You cannot see a ceiling, and both the platforms and the stairs have no hand rails. Aside from the stairs, platforms and torches, there is only darkness."),o.tick(this.b.bind(this))})})}b(){let o=window.ui;o.addB("Check yourself.",()=>{o.remB("Check yourself."),o.log("You are wearing what you have always worn. Very faintly, you remember wearing the same clothes somewhere, sometime else."),o.tick(()=>{o.log(window.nv.l())})}),setTimeout(()=>{o.remB("Check yourself.")},3e4),o.log("You look at the torch on the wall, and find that it's somehow fused to the stone. It seems that you can only either go forward and up the stairs, or to your left and down the other set of stairs."),o.addB("Go down the other set of stairs.",()=>{o.remB("Go up the stairs."),o.remB("Go down the other set of stairs."),window.direction=-1,window.tw.go()}),o.addB("Go up the stairs.",()=>{o.remB("Go up the stairs."),o.remB("Go down the other set of stairs."),window.direction=1,window.tw.go()})}}window.rb=new rb;
class tw{go(){let t=window.ui;window.direction>0?t.log("You start walking up the stairs."):t.log("You start walking down the stairs."),this.s=["Step. Step. Step.","Eyes forward, a step at a time..","Don't look down the pit. Just move forward.","The next platform is near..","Did you just hear.. no, it's probably nothing..","Continue walking. Step. Step.","..."],this.st()}st(){let t,o,e=window.ui;window.direction>0?(t="up",o="left"):(t="down",o="right"),e.tick(2,10,()=>{e.log(this.s[new Date%this.s.length]),e.tick(()=>{let i=new Date%9;0==i?this.be():1==i||2==i?this.se():(e.log(`You reach an empty platform. You quickly cross it, turn to the ${o} and start climbing ${t} again.`),console.log("nothing!"),this.st()),window.pcount++})})}be(){let t=window.ui;t.log("You reach the next platform and to your surprise, there's a closed door in one of the walls!"),t.addB("Open the door",()=>{t.remB("Open the door");let o=window.direction;window.direction=0,o>0?window.s2.go():window.s1.go()}),t.tick(15,0,()=>{0!==window.direction&&(t.remB("Open the door"),t.log("You ignore the door, and continue on your way."),this.st())})}se(){console.log("small event!"),this.st()}}window.tw=new tw;
class ui{constructor(){this.d=document,this.l=this.d.querySelector`#logs`,this.b=this.d.querySelector`#buttons`}log(t){let e=this.d.createElement`p`;for(e.insertAdjacentHTML("afterbegin",`⚜️ ${t}`),this.l.insertBefore(e,this.l.firstChild);this.l.children.length>12;)this.l.removeChild(this.l.lastChild)}addB(t,e){let i=this.d.createElement`button`;i.appendChild(this.d.createTextNode(t)),i.onclick=e,this.b.insertBefore(i,this.b.firstChild)}remB(t){let e;this.b.childNodes.forEach(i=>{i.textContent==t&&(e=i)}),e&&this.b.removeChild(e)}tick(t,e,i){"function"==typeof t&&(i=t,t=0,e=0),0==e?0==t?setTimeout(i,2e3):setTimeout(i,1e3*t):(t*=1e3,e*=1e3,setTimeout(i,new Date%(e-t)+t))}}window.ui=new ui;
class s2{go(){window.ui}}window.s2=new s2;